Suppose we have a network, consisting of a hierarchy of dumb switches (may
be with smart ones too, but with a large non-ignorable set of dumb ones).
Nagios has a nice feature of displaying the network map. But how do we supply
the network topology to Nagios from bcfg2 ?

The idea is to describe it in a separate lan_topology.xml file and then to
generate the NagiosGen configuration with the proper host parents specified.
Unfortunately, as of bcfg2 1.3.6 the NagiosGen plugin lacks the features,
allowing to amend its functionality via xincludes or Genshi template. The
current solution is based on a hack (simulating XInclude) making the NagiosGen
to load the Local/NagiosGen/config.xml (if this file is present) instead of
its normal configuration file NagiosGen/config.xml . The local config.xml as
well as Local/Cfg/etc/nagios3/conf.d/switches.cfg (included by the nagios
bundle) is then generated by a script, based on the suppled lan_topology.xml.

This script lives here because of its reliance on a hack. Later, once the
whole system is migrated to bcfg2 1.4, it will become an integral part of
the Umbrella Linux configuration.

The file lan_topology lives in Properties/ directory, see the
Documentation/installer/lan_topology.xml for examples.
